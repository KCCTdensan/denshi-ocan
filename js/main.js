(()=>{var l=i=>new Promise(a=>setTimeout(a,i)),o=i=>document.querySelector(i),p=o("#target"),e=[o("#dencon"),o("#denconRed")],D=[o("#denconRed"),o("#dencon")],s=[o("#denconAnime"),o("#denconAnime2")],b="property: rotation; to: 0 360 0; dur: 4000; easing: linear; loop: true",h="property: rotation; to: 0 0 0; dur: 1000; easing: easeInOutQuad",_="property: position; to: 0 0 0; dur: 1000; easing: easeInOutQuad",R="property: position; to: 5 0 0; dur: 1000; easing: easeOutQuad",F="property: position; to: -5 0 0; dur: 1000; easing: easeOutQuad",O="property: position; to: 0 0 0; dur: 1000; easing: easeOutQuad",Q="property: position; to: 0 0 0; dur: 1000; easing: easeOutQuad",r=o("#buttonL"),c=o("#buttonR"),x=o("#ledButton"),t=0,d=!1,w=!0,m=!0,k=b,n=0,u=(i,a)=>new Promise(y=>{e[i].setAttribute("animation",a),e[i].addEventListener("animationcomplete",L);function L(){e[i].removeEventListener("animationcomplete",L),y()}});async function E(i){d||i==t||i<0||i>=e.length||(f(),d=!0,e[t].classList.remove("clickable"),e[i].classList.remove("clickable"),i<t?(e[i].setAttribute("position","-5 0 0"),e[i].setAttribute("visible","true"),e[t].setAttribute("visible","true"),await Promise.all([u(i,Q),u(t,R)]),e[t].setAttribute("visible","false"),e[t].removeAttribute("animation"),e[i].setAttribute("position","0 0 0")):(e[i].setAttribute("position","5 0 0"),e[i].setAttribute("visible","true"),e[t].setAttribute("visible","true"),await Promise.all([u(i,O),u(t,F)]),e[t].setAttribute("visible","false"),e[t].removeAttribute("animation"),e[i].setAttribute("position","0 0 0")),await l(100),e[t].classList.add("clickable"),e[i].classList.add("clickable"),t=i,d=!1,v())}function P(){m=!1}function S(){w&&g()}function g(){w=m=!0,i();function i(a){!m||(e[t].setAttribute("position",`0 ${(Math.sin(a/200)+1)/4} 0`),requestAnimationFrame(i))}}function f(i=!1){if(!d){if(!i&&n){q();return}P(),e[t].removeAttribute("animation")}}function v(){S(),e[t].setAttribute("animation",k)}function T(){k=b,e[t].setAttribute("animation",b)}var B=()=>new Promise(i=>{f(!0),e[t].setAttribute("animation__rot",h),e[t].setAttribute("animation__ctr",_),e[t].addEventListener("animationcomplete",a);function a(){e[t].removeEventListener("animationcomplete",a),e[t].removeAttribute("animation__rot"),e[t].removeAttribute("animation__ctr"),i()}});function q(){switch(n){case 0:break;case 1:n=0;break;case 2:n=0,s[t].removeEventListener("animation-finished",A),s[t].classList.remove("clickable"),s[t].setAttribute("visible","false"),s[t].removeAttribute("animation-mixer"),e[t].setAttribute("visible","true"),e[t].classList.add("clickable");break;case 3:n=0;break}}e.forEach((i,a)=>i.addEventListener("click",async()=>{if(!n){if(n=1,await B(),await l(250),!n)return;n=2,e[a].classList.remove("clickable"),e[a].setAttribute("visible","false"),e[a].setAttribute("position","0 0 0"),s[a].setAttribute("visible","true"),s[a].classList.add("clickable"),s[a].setAttribute("animation-mixer","loop: once"),s[a].addEventListener("animation-finished",A)}}));async function A(){!n||(n=3,s[t].removeEventListener("animation-finished",A),s[t].classList.remove("clickable"),s[t].setAttribute("visible","false"),s[t].removeAttribute("animation-mixer"),e[t].setAttribute("visible","true"),e[t].classList.add("clickable"),await l(500),n&&(n=0,v()))}p.addEventListener("targetFound",v);p.addEventListener("targetLost",f);window.handler=i=>{};r.addEventListener("click",async()=>{t<1?(r.setAttribute("color","#f00"),await l(1e3),r.setAttribute("color","#888")):(t-1==0&&r.setAttribute("color","#888"),c.setAttribute("color","#ddd"),r.classList.remove("clickable"),c.classList.remove("clickable"),await E(t-1),r.classList.add("clickable"),c.classList.add("clickable"))});c.addEventListener("click",async()=>{t>e.length-2?(c.setAttribute("color","#f00"),await l(1e3),c.setAttribute("color","#888")):(t+1==e.length-1&&c.setAttribute("color","#888"),r.setAttribute("color","#ddd"),r.classList.remove("clickable"),c.classList.remove("clickable"),await E(t+1),r.classList.add("clickable"),c.classList.add("clickable"))});x.addEventListener("click",()=>{let i=!window.ledEnable;i&&!confirm(`LED\u691C\u51FA\u3092\u6709\u52B9\u5316\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307E\u3059
\u3053\u308C\u306B\u3088\u308A\u52D5\u4F5C\u304C\u7D50\u69CB\u91CD\u304F\u306A\u308A\u307E\u3059!
\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`)||(window.ledEnable=i,o("#ledText").innerText=i?"\u6709\u52B9":"\u7121\u52B9")});g();T();})();
